{
synchronized (this) {
    if (isClosed) {
      return;
    }
    isClosed=true;
  }
  if (pendingElements.size() > 0) {
    failDelivery();
  }
  for (  SessionListener listener : listeners) {
    listener.sessionClosed(this);
  }
  this.listeners.clear();
}
